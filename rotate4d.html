<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <title>Тессеракты с хвостами (с логгером)</title>
  <style>
    body { margin:0; background:#111; color:#eee; overflow:hidden; }
    canvas { display:block; }
    .label {
      position:fixed; bottom:12px; width:33%;
      text-align:center; font-size:13px; opacity:.85;
      pointer-events:none;
    }
    #l1 { left:0; } #l2 { left:33%; } #l3 { right:0; }

    #log {
      position:fixed; bottom:0; left:0; right:0;
      max-height:40%; overflow:auto;
      background:#222; color:#0f0;
      font-family:monospace; font-size:12px;
      margin:0; padding:4px; white-space:pre-wrap;
      z-index:1000;
    }
  </style>
</head>
<body>
  <div id="l1" class="label">XY-поворот</div>
  <div id="l2" class="label">Изоклиническое</div>
  <div id="l3" class="label">Двойное</div>
  <pre id="log"></pre>

  <!-- Three.js и OrbitControls -->
  <script src="https://unpkg.com/three@0.160.0/build/three.min.js"></script>
  <script src="https://unpkg.com/three@0.160.0/examples/js/controls/OrbitControls.js"></script>

  <script>
/* === простой логгер === */
function log(msg) {
  document.getElementById("log").textContent += msg + "\n";
}
window.onerror = function(message, source, lineno, colno, error) {
  log("Ошибка: " + message + " @ " + lineno + ":" + colno);
};

/* === тестовый лог === */
log("Страница загружена, инициализация...");

/* === сцена === */
try {
  const renderer = new THREE.WebGLRenderer({ antialias:true });
  renderer.setSize(window.innerWidth, window.innerHeight);
  document.body.appendChild(renderer.domElement);
  const scene = new THREE.Scene();
  const camera = new THREE.PerspectiveCamera(45, window.innerWidth/window.innerHeight, 0.1, 100);
  camera.position.set(0,0,18);
  const controls = new THREE.OrbitControls(camera, renderer.domElement);
  controls.enableDamping = true;

  log("Three.js и камера созданы.");

  // здесь дальше твой код с кватернионами, тессерактом и хвостами
  // (его можно вставить полностью, как мы делали раньше).
  // Для проверки логгера пока ограничусь кубиком:
  const g = new THREE.BoxGeometry();
  const m = new THREE.MeshBasicMaterial({color:0x44aa88, wireframe:true});
  const cube = new THREE.Mesh(g,m);
  scene.add(cube);

  function animate() {
    requestAnimationFrame(animate);
    cube.rotation.x += 0.01;
    cube.rotation.y += 0.02;
    controls.update();
    renderer.render(scene,camera);
  }
  animate();
  log("Анимация запущена.");
} catch (e) {
  log("Исключение: " + e.message);
}
  </script>
</body>
</html>